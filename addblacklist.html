<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>添加黑名单</title>
  <script>
    function getPwdFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get('pwd');
    }

    async function addToBlacklist() {
      const userId = document.getElementById('user_id').value.trim();
      const note = document.getElementById('note').value.trim();
      const pwd = getPwdFromURL();

      if (!pwd || !userId) {
        alert("缺少必要参数（pwd 或 user_id）");
        return;
      }

      const url = `https://wandering-glitter-5345.completeforyou.workers.dev/api/addToBlacklist`;

      const payload = {
        'pwd': pwd,
        'user_id': userId,
        'note': note
      };


        const response = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        // 清空文本框
        document.getElementById('user_id').value = '';
        document.getElementById('note').value = '';

    }
  </script>
</head>
<body>
  <h2>添加到黑名单</h2>
  <label for="user_id">User ID:</label><br>
  <input type="text" id="user_id" placeholder="输入用户 ID"><br><br>

  <label for="note">备注:</label><br>
  <input type="text" id="note" placeholder="输入备注信息"><br><br>

  <button onclick="addToBlacklist()">提交</button>
</body>
</html>
